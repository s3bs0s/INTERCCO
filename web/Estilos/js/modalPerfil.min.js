function CifrarASCII(e){if(null===e)return"";if(e.length>0){for(var t="",r=0;r<e.length;r++)t=t+e.charCodeAt(r)+"S";return t=t.substring(0,t.length-1),t}return""}function DescifrarASCII(e){if(null===e)return"";if(e.length>0){for(var t="",r=e.split("S"),l=0;l<r.length;l++)t+=String.fromCharCode(r[l]);return t}return""}function verModalPerfil(e,t,r,l,a,o,i,n,u,d,m,s,c,f,I,y){if($("#ModalPerfil input,select,textarea").css("color","#555555"),document.getElementById("perfilIDUsuario").value=DescifrarASCII(e),document.getElementById("perfilRolOcultoUsuario").value=DescifrarASCII(a),document.getElementById("perfilNombresUsuario").value=DescifrarASCII(t),document.getElementById("perfilApellidosUsuario").value=DescifrarASCII(r),"AdminS"===DescifrarASCII(a)?document.getElementById("perfilRolUsuario").value="Administrador":document.getElementById("perfilRolUsuario").value=DescifrarASCII(a),"TI"===DescifrarASCII(o)?document.getElementById("perfilTipoIdentiUsuario").value="Tarjeta de Identidad":"CC"===DescifrarASCII(o)?document.getElementById("perfilTipoIdentiUsuario").value="Cédula de Ciudadanía":"TP"===DescifrarASCII(o)?document.getElementById("perfilTipoIdentiUsuario").value="Tarjeta de Pasaporte":"CE"===DescifrarASCII(o)&&(document.getElementById("perfilTipoIdentiUsuario").value="Cédula de Extranjería"),document.getElementById("perfilNumIdentiUsuario").value=DescifrarASCII(i),document.getElementById("perfilGeneroUsuario").value=DescifrarASCII(n),document.getElementById("perfilFechaNacimientoUsuario").value=DescifrarASCII(u),document.getElementById("perfilEmailUsuario").value=DescifrarASCII(d),document.getElementById("perfilTelefonoUsuario").value=DescifrarASCII(m),document.getElementById("perfilMovilUsuario").value=DescifrarASCII(s),document.getElementById("perfilContraActualOcultoUsuario").value=c,document.getElementById("perfilDireccionUsuario").value=DescifrarASCII(f),"Cliente"===DescifrarASCII(a))$("#perfilCajSedeUsuario").hide(),$("#perfilCajSedeCliente").show(),$("#perfilPanelFotoUsuario").hide(),document.getElementById("perfilSedeUsuario").value="",document.getElementById("perfilSedeCliente").value=DescifrarASCII(I),$("#perfilSedeCliente").attr("required",""),$("#perfilSedeUsuario").removeAttr("required");else{if($("#perfilCajSedeUsuario").show(),$("#perfilCajSedeCliente").hide(),"AdminS"===DescifrarASCII(a))$("#perfilPanelFotoUsuario").hide();else{var p=document.getElementById("perfilNombreImagenUsuario");p.value=l,"86S97S99S105S111"===p.value?$("#perfilEliminarFoto").hide():$("#perfilEliminarFoto").show(),$("#perfilPanelFotoUsuario").show(),"86S97S99S105S111"===l?"Masculino"===DescifrarASCII(n)?($("#perfilCajFotoUsuario img").attr("src","Estilos/img/FotoPerfilEmpleados/PerfilAnonimoH.jpg"),$("#perfilCajFotoUsuario img").attr("alt","PerfilAnonimoH.jpg")):($("#perfilCajFotoUsuario img").attr("src","Estilos/img/FotoPerfilEmpleados/PerfilAnonimoM.jpg"),$("#perfilCajFotoUsuario img").attr("alt","PerfilAnonimoM.jpg")):($("#perfilCajFotoUsuario img").attr("src","ArchivosSistema/Usuarios/"+DescifrarASCII(y)+"/"+DescifrarASCII(l)),$("#perfilCajFotoUsuario img").attr("alt",DescifrarASCII(l)))}document.getElementById("perfilSedeUsuario").value=DescifrarASCII(y),document.getElementById("perfilSedeCliente").value="",$("#perfilSedeCliente").removeAttr("required")}}function ContrasIgualesPerfil(){document.getElementById("perfilContraNuevaUsuario").value!==document.getElementById("perfilRepitaContraNuevaUsuario").value?($("#perfilCambiarContras").attr("disabled",""),document.getElementById("perfilRepitaContraNuevaUsuario").style.color="#E06666",document.getElementById("perfilContraNuevaUsuario").style.color="#E06666"):($("#perfilCambiarContras").removeAttr("disabled"),document.getElementById("perfilRepitaContraNuevaUsuario").style.color="#555555",document.getElementById("perfilContraNuevaUsuario").style.color="#555555")}function EnviarFormContras(){var e=DescifrarASCII(document.getElementById("perfilContraActualOcultoUsuario").value);e!==document.getElementById("perfilContraActualUsuario").value?(document.getElementById("perfilContraActualUsuario").style.color="#E06666",document.getElementById("perfilContraActualUsuario").value="Contraseña Actual Incorrecta!"):""===document.getElementById("perfilContraNuevaUsuario").value||"Falta nueva contraseña!"===document.getElementById("perfilContraNuevaUsuario").value?(document.getElementById("perfilContraNuevaUsuario").value="Falta nueva contraseña!",document.getElementById("perfilContraNuevaUsuario").style.color="#E06666"):document.getElementById("perfilContraNuevaUsuario").value.length<3||document.getElementById("perfilContraNuevaUsuario").value.length>20?(document.getElementById("perfilContraNuevaUsuario").value="Entre 3 y 20 caracteres!",document.getElementById("perfilContraNuevaUsuario").style.color="#E06666"):(document.getElementById("FormPerfil").action="UsuarioNC",document.getElementById("FormPerfil").submit())}function EnviarFormFoto(e,t){if("AI"===e)"AdminS"!==document.getElementById("perfilRolOcultoUsuario").value&&"Cliente"!==document.getElementById("perfilRolOcultoUsuario").value&&(document.getElementById("FormPerfil").action="Usuario"+e,document.getElementById("FormPerfil").enctype="multipart/form-data",document.getElementById("FormPerfil").submit());else{var r=document.getElementById("perfilNombreImagenUsuario").value;if("86S97S99S105S111"===r)$("#perfilEliminarFoto").hide();else{var l=document.getElementById("perfilRolOcultoUsuario").value;"AdminS"!==l&&"Cliente"!==l&&($("#perfilCajFotoUsuario img").attr("src","ArchivosSistema/Usuarios/"+DescifrarASCII(t)+"/"+DescifrarASCII(r)),$("#perfilCajFotoUsuario img").attr("alt",DescifrarASCII(r)),document.getElementById("FormPerfil").action="Usuario"+e,document.getElementById("FormPerfil").submit())}}}function validarFilePerfil(e){var t=[".png",".bmp",".jpg",".jpeg",".svg"],r=6,l=e.value,a=e.value.lastIndexOf("."),o=l.slice(a,l.length);if(e.files.length>0)if(e.files[0].size/1048576>r)document.getElementById("perfilHayImagenUsuario").value="N",document.getElementById(e.id).value="",document.getElementById(e.id).style.background="#E06666",document.getElementById(e.id).style.color="#fff",$("#perfilCambiarFoto").attr("disabled","");else if(-1===t.indexOf(o))document.getElementById("perfilHayImagenUsuario").value="N",document.getElementById(e.id).value="",document.getElementById(e.id).style.background="#E06666",document.getElementById(e.id).style.color="#fff",$("#perfilCambiarFoto").attr("disabled","");else{$("#perfilCambiarFoto").removeAttr("disabled"),document.getElementById(e.id).style.background="#fff",document.getElementById(e.id).style.color="#555",document.getElementById("perfilHayImagenUsuario").value="Y";var i=document.querySelector("#perfilCajFotoUsuario img"),n=document.querySelector("#perfilArchivoUsuario").files[0],u=new FileReader;u.onloadend=function(){i.src=u.result},u.readAsDataURL(n)}else document.getElementById("perfilHayImagenUsuario").value="N",document.getElementById(e.id).value="",document.getElementById(e.id).style.background="#E06666",document.getElementById(e.id).style.color="#fff",$("#perfilCambiarFoto").attr("disabled","")}$(document).ready(function(){var e=document.getElementById("perfilHayImagenUsuario");null!==e&&(e.value="N",$("#perfilCambiarFoto").attr("disabled",""))}),$("#accordionPerfil .collapse").on("shown.bs.collapse",function(){var e=$(this);(e.hasClass("seccionFotoPerfil")||e.hasClass("seccionPasswordPerfil"))&&$("#BtnActuaPerfil").hide()}).on("hidden.bs.collapse",function(){var e=$(this);(e.hasClass("seccionFotoPerfil")||e.hasClass("seccionPasswordPerfil"))&&$("#BtnActuaPerfil").show()}),$(document).ready(function(){document.getElementById("perfilContraActualUsuario").addEventListener("keyup",function(e){13===e.keyCode&&(e.preventDefault(),document.getElementById("perfilCambiarContras").click())}),document.getElementById("perfilContraNuevaUsuario").addEventListener("keyup",function(e){13===e.keyCode&&(e.preventDefault(),document.getElementById("perfilCambiarContras").click())}),document.getElementById("perfilRepitaContraNuevaUsuario").addEventListener("keyup",function(e){13===e.keyCode&&(e.preventDefault(),document.getElementById("perfilCambiarContras").click())})});var modal=document.getElementById("ModalPerfil"),flex=document.getElementById("FlexPerfil"),abrir=document.getElementById("AbrirPerfil"),cerrarH=document.getElementById("CerrarHeaderPerfil"),cerrarB=document.getElementById("CerrarBodyPerfil");null!==modal&&(abrir.addEventListener("click",function(){modal.style.display="block",$("html,body").css("overflow","hidden")}),cerrarH.addEventListener("click",function(){modal.style.display="none",$("html,body").css("overflow","auto")}),cerrarB.addEventListener("click",function(){modal.style.display="none",$("html,body").css("overflow","auto")}),window.addEventListener("click",function(e){e.target===flex&&(modal.style.display="none",$("html,body").css("overflow","auto"))}));